#!/usr/bin/env python3

import os
import yaml

yaml.warnings({'YAMLLoadWarning': False})


class MultipleConfigs(object):

    def __init__(self, directory, urls):
        self.directory = directory
        self.urls = urls

    def opener(self):
        self.files = os.listdir(self.directory)
        return self.files

    def driver(self):
        #: print(* self.files, end="\n\n")
        if len(self.files) != 0:
            for config in self.files:
                #: print(config, end="\n")
                with open(self.directory + config, "r") as configs:
                    #: print(config)
                    data = yaml.load(configs)
                #: print(data)
                #: print("\n\n", self.config, end="\n\n")
                self.path = data["requests"][0]["path"][0].removeprefix("{{BaseURL}}")
                self.method =  data["requests"][0]["method"]
                del data
                self.files.remove(config)
                #: print(* self.files)
                print("\n\n", self.path, "\n")
            #: return self.driver()
        else:
            pass

    def results(self):
        self.lists = []
        with open(self.urls, "r") as _urls:
            for url in _urls:
                url = url.strip() + self.path
                self.lists.append(url)
        for url in self.lists:
            print(url)
        return self.driver()

mm = MultipleConfigs("./configs/", "urls.txt")
mm.opener()
mm.driver()
mm.results()
